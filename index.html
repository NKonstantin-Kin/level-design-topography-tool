<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Level Design Tool</title>
  <style>
    body { margin: 0; font-family: Arial; }
    #toolbar { background: #f0f0f0; padding: 10px; display: flex; gap: 10px; }
    #canvas-container { display: flex; }
    #sheets-panel { width: 200px; background: #e0e0e0; padding: 10px; }
    #canvas { border: 1px solid #000; cursor: crosshair; }
    button.active { background: #0078d7; color: white; }
  </style>
</head>
<body>
  <div id="toolbar">
    <button id="add-sheet">+</button>
    <button id="grid-toggle">Grid: OFF</button>
    <button id="line-btn">Line</button>
    <button id="rect-btn">Rect</button>
    <button id="text-btn">Text</button>
    <input type="color" id="color-picker" value="#000000">
    <input type="range" id="line-width" min="1" max="10" value="2">
  </div>

  <div id="canvas-container">
    <div id="sheets-panel">
      <ul id="sheets-list"></ul>
    </div>
    <canvas id="canvas" width="800" height="600"></canvas>
  </div>
  <script>
  // Состояние приложения
  let sheets = [];
  let currentSheetIndex = -1;
  let isDrawing = false;
  let currentTool = 'line';
  let gridEnabled = false;

  // DOM-элементы
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  const sheetsList = document.getElementById('sheets-list');

  // Инициализация
  document.getElementById('add-sheet').addEventListener('click', addSheet);
  document.getElementById('grid-toggle').addEventListener('click', toggleGrid);
  document.getElementById('line-btn').addEventListener('click', () => setTool('line'));
  document.getElementById('rect-btn').addEventListener('click', () => setTool('rect'));

  // Рисование на canvas
  canvas.addEventListener('mousedown', startDrawing);
  canvas.addEventListener('mousemove', draw);
  canvas.addEventListener('mouseup', stopDrawing);

  // Функции
  function addSheet() {
    const sheetName = prompt("Название листа:", "Лист " + (sheets.length + 1));
    if (sheetName) {
      sheets.push({ name: sheetName, shapes: [] });
      updateSheetsList();
      selectSheet(sheets.length - 1);
    }
  }

  function updateSheetsList() {
    sheetsList.innerHTML = '';
    sheets.forEach((sheet, index) => {
      const li = document.createElement('li');
      li.textContent = sheet.name;
      li.addEventListener('click', () => selectSheet(index));
      sheetsList.appendChild(li);
    });
  }
      function selectSheet(index) {
    currentSheetIndex = index;
    redrawCanvas();
  }

  function toggleGrid() {
    gridEnabled = !gridEnabled;
    document.getElementById('grid-toggle').textContent = gridEnabled ? 'Grid: ON' : 'Grid: OFF';
    redrawCanvas();
  }

  function setTool(tool) {
    currentTool = tool;
    document.querySelectorAll('#toolbar button').forEach(btn => btn.classList.remove('active'));
    document.getElementById(`${tool}-btn`).classList.add('active');
  }

  function startDrawing(e) {
    isDrawing = true;
    // Заглушка для начала рисования
  }

  function draw(e) {
    if (!isDrawing) return;
    // Заглушка для рисования
  }

  function stopDrawing() {
    isDrawing = false;
  }

  function redrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    if (gridEnabled) drawGrid();
    // Здесь будет отрисовка фигур из sheets[currentSheetIndex].shapes
  }

  function drawGrid() {
    ctx.strokeStyle = '#ccc';
    ctx.lineWidth = 1;
    const step = 20;
    for (let x = 0; x < canvas.width; x += step) {
      ctx.beginPath();
      ctx.moveTo(x, 0);
      ctx.lineTo(x, canvas.height);
      ctx.stroke();
    }
    for (let y = 0; y < canvas.height; y += step) {
      ctx.beginPath();
      ctx.moveTo(0, y);
      ctx.lineTo(canvas.width, y);
      ctx.stroke();
    }
  }
</script>
</body>
</html>
